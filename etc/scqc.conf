[DEFAULT]
sleep = 1200
batchsize = 2
batchsleep = 10
ncycles = 9999999
species=mouse
tissue=brain

# prod setup
#localroot = ~/scqc
#rootdir = %(localroot)s
#sharedroot = /data/hover/scqc
#metadir = %(sharedroot)s/metadata
#cachedir = %(sharedroot)s/cache
#resourcedir = %(localroot)s/resource
#tempdir = %(localroot)s/temp
#outputdir = %(sharedroot)s/output
#figuredir =%(sharedroot)s/figures


# testing setup
rootdir = ~/scqc
metadir = %(rootdir)s/metadata    
cachedir = %(rootdir)s/cache	 
tempdir = %(rootdir)s/temp
resourcedir = %(rootdir)s/resource
outputdir = %(rootdir)s/output
figuredir =%(rootdir)s/figures

[setup]


[query]
todofile=%(rootdir)s/query-todo.txt
donefile = %(rootdir)s/query-donefile.txt
seenfile = %(rootdir)s/query-seenfile.txt
backend = sra


[sra]
query_sleep = 1   
# seconds between efetch calls. 

# when downloading with sra/fasterq-dump, each download takes 6 cpus by default. 
#sra_esearch=https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?db=sra&datetype=pdat&mindate=2001&maxdate=2020
sra_esearch=https://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?db=sra
#  %22 = "  in eutils search strings. 
sra_efetch=https://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=sra
mouse_search_term=%%28%%22mus+musculus%%22%%5BOrganism%%5D%%29+AND+%%28%%22rna+seq%%22%%5BStrategy%%5D%%29+AND+%%28%%22single+cell%%22%%5BText+Word%%5D+AND+%%22brain%%22%%5BText+Word%%5D%%29+
human_search_term=%%28%%22homo+sapiens%%22%%5BOrganism%%5D+AND+%%28%%22rna+seq%%22%%5BStrategy%%5D%%29+AND+%%28%%22single+cell%%22%%5BText+Word%%5D+AND+%%22brain%%22%%5BText+Word%%5D%%29+

# max_size in kb
max_size = 50000000
max_downloads=4
num_streams=6
query_max=2
uid_batchsize = 100
# note that uid_batchsize can be taken rather large according to esearch docs
expid_file = %(resourcedir)s/sc%(tissue)s_expids_%(species)s.txt
xid_batchsize = 100
# for esearch on xids 


[impute]
todofile=%(rootdir)s/query-donefile.txt
donefile=%(rootdir)s/impute-donefile.txt
seenfile = %(rootdir)s/impute-seenfile.txt
backend = sra


[download]
todofile=%(rootdir)s/impute-donefile.txt
donefile=%(rootdir)s/download-donefile.txt
seenfile = %(rootdir)s/download-seenfile.txt


# input output lists pf: prefetch, fq: fastq-dump
pf_todofile=%(rootdir)s/prefetch-todo.txt
pf_donefile = %(rootdir)s/prefetch-donefile.txt
pf_seenfile = %(rootdir)s/prefetch-seenfile.txt

fq_todofile=%(rootdir)s/fastqdump-todo.txt
fq_donefile = %(rootdir)s/fastqdump-donefile.txt
fq_seenfile = %(rootdir)s/fastqdump-seenfile.txt

# pf_max_downloads should not exceed 5 for now. Bandwidth issue
pf_max_downloads=4
#pf_num_streams=6
fq_max_jobs=4
fq_nthreads=6
# total thread usage is  fq_nthreads * fq_max_jobs

[analysis]
todofile=%(rootdir)s/download-donefile.txt
donefile=%(rootdir)s/analysis-donefile.txt
seenfile = %(rootdir)s/analysis-seenfile.txt
max_jobs=5


[star]
# number of cores for star: genome generation
ncore_index = 6
# number of cores for star: align reads
ncore_align = 10

# cellranger whitelists by 10x version
whitelist_10xv1=https://github.com/10XGenomics/cellranger/raw/master/lib/python/cellranger/barcodes/737K-april-2014_rc.txt
whitelist_10xv2=https://github.com/10XGenomics/cellranger/raw/master/lib/python/cellranger/barcodes/737K-august-2016.txt
whitelist_10xv3=https://github.com/10XGenomics/cellranger/raw/master/lib/python/cellranger/barcodes/3M-february-2018.txt.gz

# genome info
gencode_root=ftp://ftp.ebi.ac.uk/pub/databases/gencode
human_gtf_url= %(gencode_root)s/Gencode_human/release_38/gencode.v38.annotation.gtf.gz
human_fa_url= %(gencode_root)s/Gencode_human/release_38/GRCh38.primary_assembly.genome.fa.gz
mouse_gtf_url = %(gencode_root)s/Gencode_mouse/release_M27/gencode.vM27.annotation.gtf.gz
mouse_fa_url = %(gencode_root)s/Gencode_mouse/release_M27/GRCm39.primary_assembly.genome.fa.gz


[statistics]
todofile=%(rootdir)s/analysis-donefile.txt
donefile=%(rootdir)s/statistics-donefile.txt
seenfile = %(rootdir)s/statistics-seenfile.txt

# macosko 2015 table S2 - mouse
cell_cycle_genes = %(resourcedir)s/mouse_cellcycle.csv
# https://housekeeping.unicamp.br/MostStable.csv
stable_housekeepinig =%(resourcedir)s/mouse_stable_housekeeping.csv
# https://raw.githubusercontent.com/macarthur-lab/gene_lists/master/lists/mgi_essential.tsv
essential_genes = %(resourcedir)s/mouse_essential.csv
# https://www.tandfonline.com/doi/abs/10.3109/1354750X.2013.811538?journalCode=ibmk20
female_genes = %(resourcedir)s/female_markers.csv
male_genes = %(resourcedir)s/male_markers.csv

#highly variable genes - defaults
hvg_min_mean = 0.0125
hvg_max_mean = 3 
hvg_min_disp = 0.5
hvg_max_disp = 100000000
hvg_flavor=seurat
#PCA 
nPCA = 50
use_hvg=True
#neighbor graph -  defaults
n_neighbors=15
n_pcs = 40


[metamarker]
# rds_path should be created manually and stored on a shared direc
marker_dir = %(resourcedir)s/MoP
class_markerset  = %(resourcedir)s/biccn_MoP_class_marker_set.csv.gz
subclass_markerset  = %(resourcedir)s/biccn_MoP_subclass_marker_set.csv.gz

max_rank = 100

[figures]

